Thank you for installing {{ .Chart.Name }}.

Your release is named {{ .Release.Name }}.

To learn more about the release, try:

  $ helm status {{ .Release.Name }}
  $ helm get all {{ .Release.Name }}

{{ if .Values.kafka.enabled }}
Based on your configuration, this deployment create a kafka cluster to be used by gateway.
This configuration should be for testing purpose only. Please do not use this kafka for production usages.
{{ if hasKey .Values.gateway.env "KAFKA_BOOTSTRAP_SERVERS" }}
WARNING: You defined a Kafka boostrap server in gateway configuration. This will override the auto generated configuration to connect to embedded kafka cluster.
Please verify your connectivity
{{- end }}
{{- end }}

{{- $internalServiceHost := printf "%s.%s.svc.%s" (include "conduktor-gateway.internalServiceName" .) .Release.Namespace .Values.clusterDomain  -}}
{{- if not (hasKey .Values.gateway.env "GATEWAY_ADVERTISED_HOST") }}
You can connect to gateway from inside your cluster with {{ $internalServiceHost }}:{{ .Values.gateway.portRange.start }} as bootstrap server.
{{- else }}
You defined a specific domain to be advertised : {{ .Values.gateway.env.GATEWAY_ADVERTISED_HOST }}
You'll need to configure your network connections to gateway with this domain.
{{- end }}

{{ if .Values.ingress.enabled -}}
{{- $proto := ternary "https" "http" .Values.ingress.tls }}
Admin API is available from outside yor cluster at {{ printf "%s://%s" $proto .Values.ingress.hostname }}.
{{- else }}
Admin API is available from inside your cluster at {{ $internalServiceHost }}:{{ .Values.gateway.admin.port }}.
It could be exposed outside using a port-forwarding or a LoadBalancer like
  $ kubectl port-forward -n {{ .Release.Namespace }} svc/{{ include "conduktor-gateway.internalServiceName" . }} {{ .Values.gateway.admin.port }}:{{ .Values.gateway.admin.port }}
Admin API will be available at http://127.0.0.1:{{ .Values.gateway.admin.port }}
{{- end }}

{{- if and (not .Values.gateway.secretRef) .Values.gateway.admin.users }}
You can connect to gateway with the credentials:
  ADMIN_LOGIN="$(kubectl get secret {{ include "conduktor-gateway.secretName" . }} -n {{ .Release.Namespace }} -o jsonpath="{.data.GATEWAY_ADMIN_API_USER_0_USERNAME}" | base64 --decode)"
  ADMIN_PASSWORD="$(kubectl get secret {{ include "conduktor-gateway.secretName" . }} -n {{ .Release.Namespace }} -o jsonpath="{.data.GATEWAY_ADMIN_API_USER_0_PASSWORD}" | base64 --decode)"
{{- end }}

{{ if .Values.resources -}}
Depreciation Warning:
- Root value "resources" is deprecated. We recommend using "gateway.resources" instead.
{{- end }}