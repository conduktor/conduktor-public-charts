# Provisioner chart test dependencies
# Requires full stack: Kafka, PostgreSQL, Console, Gateway
dependencies:
  - name: kafka
    chart: bitnami/kafka
    version: "31.0.0"
    wait: statefulset/kafka-controller
    timeout: 600s

  - name: postgresql
    chart: bitnami/postgresql
    version: "12.5.8"
    wait: statefulset/postgresql

  - name: console
    chart: conduktor/console
    wait: deployment/console
    timeout: 600s
    values:
      config:
        organization:
          name: conduktor
        admin:
          email: test@test.io
          password: testP4ss!
        database:
          host: postgresql
          name: platform
          username: postgres
          password: conduktor123

  - name: gateway
    chart: conduktor/gateway
    wait: deployment/gateway-conduktor-gateway
    timeout: 600s
    values:
      gateway:
        env:
          KAFKA_BOOTSTRAP_SERVERS: kafka:9092
        admin:
          users:
            - username: admin
              password: Admin123!
              admin: true
